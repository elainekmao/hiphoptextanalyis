<!DOCTYPE html>
<html>
    <head>
      <title>Rap Lyrics Visualization</title>
        <script src="js/sigma.min.js"></script>
        <script src="js/plugins/sigma.parsers.gexf.min.js"></script>
        <script src="js/plugins/sigma.layout.forceAtlas2.min.js"></script>
        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
        <style>
            #sigma-container {
                position:absolute;
                height:80%;
                width:100%;
                margin: auto;
            }
            body {
              background-color:#FFF;
            }
        </style>
    </head>
    <body>
        <div class="container-fluid">
        <div class="row">
        <div class="col-md-12">
          <h2>Text Analysis of Rap Lyrics</h2>
        </div>
      </div>
      <div class="row">
        <div id="labels-container" class="col-md-4"></div>
        <div id="sigma-container" class="col-md-8"></div>
      </div>
    </div>
        <script>
         
sigma.classes.graph.addMethod('neighbors', function(nodeId) {
    var k,
        neighbors = {},
        index = this.allNeighborsIndex[nodeId] || {};

    for (k in index)
      neighbors[k] = this.nodesIndex[k];

    return neighbors;
  });

  sigma.parsers.gexf(
    'hiphopbyregion2.gexf',
    {
      container: 'sigma-container',
      settings: {
        defaultLabelColor: '#FFF',
        defaultLabelSize:12,
        defaultLabelBGColor: '#FFF',
        defaultLabelHoverColor: '#000',
        minNodeSize:3,
        maxNodeSize:3,
        defaultEdgeColor: '#FFF',
        edgeColor: "default"
      }
    },
    function(s) {
      s.graph.nodes().forEach(function(n) {
        n.originalColor = n.color;
      });
      s.graph.edges().forEach(function(e) {
        e.originalColor = e.color;
      });

      s.bind('clickNode', function(e) {
        var nodeId = e.data.node.id,
            toKeep = s.graph.neighbors(nodeId);
        toKeep[nodeId] = e.data.node;

        s.graph.nodes().forEach(function(n) {
          if (toKeep[n.id])
            n.color = n.originalColor;
          else
            if (n.originalColor == 'rgb(255,255,255)')
              n.color = n.originalColor;
            else
              n.color = '#eee';
        });

        s.graph.edges().forEach(function(e) {
          if (toKeep[e.source] && toKeep[e.target])
            e.color = '#eee';
          else
            e.color = e.originalColor;
        });
        s.refresh();
      });

      s.bind('clickStage', function(e) {
        s.graph.nodes().forEach(function(n) {
          n.color = n.originalColor;
        });

        s.graph.edges().forEach(function(e) {
          e.color = e.originalColor;
        });

        // Same as in the previous event:
        s.refresh();
      });
    }
  );
</script>
</body>
</html>